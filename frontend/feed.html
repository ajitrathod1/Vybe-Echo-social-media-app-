<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vybe ‚Äì Feed</title>
  <link
      rel="icon"
      type="image/png"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ö°</text></svg>"
    />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    :root {
      --bg-gradient: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: 1px solid rgba(255, 255, 255, 0.08);
      --accent: #8b5cf6;
      --text: #ffffff;
      --text-muted: #a0a0a0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-gradient);
      background-attachment: fixed;
      color: var(--text);
      margin: 0;
      overflow-x: hidden;
    }

    /* Layout Grid: Sidebar | Main Feed | Right Panel */
    .app-container {
      display: flex;
      max-width: 1600px;
      margin: 0 auto;
      min-height: 100vh;
    }

    /* üì± Left Sidebar (Insta Style) */
    .sidebar-nav {
      width: 250px;
      padding: 40px 20px;
      border-right: var(--glass-border);
      position: sticky;
      top: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: rgba(15, 12, 41, 0.4);
      backdrop-filter: blur(10px);
    }

    .logo {
      margin-bottom: 40px;
      padding-left: 10px;
    }
    .logo span {
      font-size: 28px;
      font-weight: 800;
      background: linear-gradient(45deg, #c084fc, #a855f7);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 16px;
      margin-bottom: 8px;
      color: var(--text);
      text-decoration: none;
      border-radius: 16px;
      transition: 0.3s;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
    }
    .nav-item:hover {
      background: rgba(255,255,255,0.1);
      transform: translateX(5px);
    }
    .nav-item.active {
      font-weight: 700;
      color: var(--accent);
    }
    .nav-item svg { width: 24px; height: 24px; }

    .create-btn {
      margin-top: 20px;
      background: linear-gradient(90deg, #8b5cf6, #d946ef);
      color: white;
      border: none;
      padding: 14px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: 0.3s;
    }
    .create-btn:hover { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5); }

    /* üè† Main Feed Area */
    .main-content {
      flex: 1;
      max-width: 700px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* üì∏ Stories Bar */
    .stories-container {
      display: flex;
      gap: 15px;
      overflow-x: auto;
      padding-bottom: 20px;
      margin-bottom: 30px;
      scrollbar-width: none; /* Firefox */
    }
    .stories-container::-webkit-scrollbar { display: none; }

    .story-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      min-width: 70px;
    }
    .story-ring {
      width: 66px;
      height: 66px;
      border-radius: 50%;
      padding: 3px;
      background: linear-gradient(45deg, #f9ce34, #ee2a7b, #6228d7);
      display: flex; /* Centering image */
      justify-content: center;
      align-items: center;
    }
    .story-item.seen .story-ring { background: rgba(255,255,255,0.2); }
    .story-img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 3px solid #0f0c29;
      object-fit: cover;
    }
    .story-name { font-size: 12px; color: var(--text-muted); }

    /* üìù Create Post Box (Modern) */
    .create-post-box {
      background: var(--glass-bg);
      border: var(--glass-border);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 30px;
      display: none; /* Hidden by default, toggled via button */
    }
    .create-post-box.active { display: block; animation: fadeIn 0.3s ease; }
    
    textarea.caption-input {
      width: 100%;
      background: transparent;
      border: none;
      color: white;
      font-size: 16px;
      resize: none;
      outline: none;
      min-height: 60px;
    }

    /* üñº Feed Post Card */
    .post-card {
      background: transparent;
      border-bottom: var(--glass-border);
      padding-bottom: 30px;
      margin-bottom: 30px;
    }
    .post-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    .user-info { display: flex; align-items: center; gap: 12px; }
    .avatar-small {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .username { font-weight: 600; font-size: 14px; }
    .time { color: var(--text-muted); font-size: 12px; margin-left: 8px; }

    .post-media {
      width: 100%;
      border-radius: 8px;
      overflow: hidden;
      background: #000;
      margin-bottom: 12px;
      border: var(--glass-border);
    }
    .post-media img, .post-media video {
      width: 100%;
      display: block;
      max-height: 600px;
      object-fit: contain;
    }

    .action-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .action-left { display: flex; gap: 20px; }
    .icon-btn {
      background: transparent;
      border: none;
      color: white;
      cursor: pointer;
      transition: 0.2s;
    }
    .icon-btn:hover { color: var(--accent); transform: scale(1.1); }
    .icon-btn svg { width: 26px; height: 26px; }

    .likes-count { font-weight: 600; font-size: 14px; margin-bottom: 8px; display: block; }
    .caption { font-size: 14px; line-height: 1.5; color: #eee; margin-bottom: 8px; }
    .caption strong { font-weight: 600; margin-right: 6px; }
    .view-comments { color: var(--text-muted); font-size: 14px; cursor: pointer; }

    /* üëâ Right Suggestions Panel */
    .right-panel {
      width: 350px;
      padding: 40px 20px;
      display: none;
    }
    @media(min-width: 1100px) { .right-panel { display: block; } }

    .user-profile-summary {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 30px;
    }
    .avatar-large { width: 56px; height: 56px; border-radius: 50%; object-fit: cover; }
    .logout-text { color: var(--accent); font-size: 12px; cursor: pointer; font-weight: 600; }

    .suggestions-header {
      display: flex;
      justify-content: space-between;
      color: var(--text-muted);
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
    }
    .suggestion-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    .follow-link { color: var(--accent); font-size: 12px; font-weight: 600; cursor: pointer; }
    .follow-link:hover { color: white; }

    /* Animations */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    /* Mobile Responsive */
    @media(max-width: 768px) {
      .app-container { flex-direction: column; }
      .sidebar-nav {
        width: 100%;
        height: auto;
        position: fixed;
        bottom: 0;
        top: auto;
        flex-direction: row;
        justify-content: space-around;
        padding: 10px;
        z-index: 1000;
        border-top: var(--glass-border);
        border-right: none;
        background: #0f0c29;
      }
      .logo, .create-btn, .nav-text { display: none; } /* Show only icons on mobile */
      .right-panel { display: none; }
      .main-content { padding-bottom: 70px; } /* Space for bottom nav */
    }
  </style>
</head>
<body>

  <div class="app-container">
    
    <!-- üü¢ Sidebar Navigation -->
    <nav class="sidebar-nav">
      <div class="logo">
        <span>‚ö° Vybe</span>
      </div>
      
      <a href="#" class="nav-item active">
        <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.1l-10 9h3v10h14v-10h3l-10-9zm0 2.8l6 5.4v7.8h-4v-6h-4v6h-4v-7.8l6-5.4z"/></svg>
        <span class="nav-text">Home</span>
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
        <span class="nav-text">Search</span>
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/><path d="M3.6 9h16.8M3.6 15h16.8M11.5 3a17 17 0 000 18M12.5 3a17 17 0 010 18"/></svg>
        <span class="nav-text">Explore</span>
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 12h16M4 12l6-6m-6 6l6 6"/></svg> <!-- Placeholder for reels -->
        <span class="nav-text">Reels</span>
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"/></svg>
        <span class="nav-text">Messages</span>
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0"/></svg>
        <span class="nav-text">Notifications</span>
      </a>
      
      <button class="create-btn" onclick="toggleCreatePost()">
        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
        <span class="nav-text">Create</span>
      </button>
    </nav>

    <!-- üü¢ Main Feed -->
    <main class="main-content">
      
      <!-- üì∏ Stories -->
      <div class="stories-container" id="stories">
        <!-- Injected via JS -->
      </div>

      <!-- üìù Create Post Area (Hidden by default) -->
      <div class="create-post-box" id="createPostBox">
        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
           <img id="currentUserAvatar" class="avatar-small" src="" />
           <span style="font-weight: 600; align-self: center;" id="currentUserName">User</span>
        </div>
        <textarea id="postText" class="caption-input" placeholder="Write a caption..."></textarea>
        
        <div id="previewArea" style="margin-top: 10px;"></div>

        <div style="display: flex; justify-content: space-between; margin-top: 15px; align-items: center;">
          <div style="display: flex; gap: 10px;">
             <label for="imageUpload" style="cursor: pointer;">üì∑ Photo</label>
             <input type="file" id="imageUpload" accept="image/*" hidden />
             
             <label for="videoUpload" style="cursor: pointer;">üé• Video</label>
             <input type="file" id="videoUpload" accept="video/*" hidden />
          </div>
          <button onclick="createPost()" style="background: var(--accent); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600;">Share</button>
        </div>
      </div>

      <!-- üñº Feed -->
      <div id="feed">
        <!-- Posts Injected Here -->
      </div>
    </main>

    <!-- üü¢ Right Sidebar -->
    <aside class="right-panel">
       <div class="user-profile-summary">
         <img id="sidebarAvatar" class="avatar-large" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" />
         <div style="flex: 1;">
            <div style="font-weight: 600; font-size: 14px;" id="sidebarName">username</div>
            <div style="font-size: 12px; color: gray;" id="sidebarEmail">User Name</div>
         </div>
         <div class="logout-text" onclick="logoutUser()">Switch</div>
       </div>

       <div class="suggestions-header">
         <span>Suggested for you</span>
         <span style="cursor: pointer; font-size: 12px; color: white;">See All</span>
       </div>

       <div id="suggestionsList">
         <!-- Mock Data -->
         <div class="suggestion-item">
            <div style="display: flex; align-items: center; gap: 10px;">
               <img src="https://i.pravatar.cc/150?img=1" class="avatar-small" />
               <div>
                  <div style="font-weight: 600; font-size: 13px;">sarah_design</div>
                  <div style="font-size: 11px; color: gray;">New to Instagram</div>
               </div>
            </div>
            <div class="follow-link">Follow</div>
         </div>
         <div class="suggestion-item">
            <div style="display: flex; align-items: center; gap: 10px;">
               <img src="https://i.pravatar.cc/150?img=12" class="avatar-small" />
               <div>
                  <div style="font-weight: 600; font-size: 13px;">alex_coder</div>
                  <div style="font-size: 11px; color: gray;">Followed by dev_community</div>
               </div>
            </div>
            <div class="follow-link">Follow</div>
         </div>
         <div class="suggestion-item">
            <div style="display: flex; align-items: center; gap: 10px;">
               <img src="https://i.pravatar.cc/150?img=33" class="avatar-small" />
               <div>
                  <div style="font-weight: 600; font-size: 13px;">travel_byte</div>
                  <div style="font-size: 11px; color: gray;">Suggested for you</div>
               </div>
            </div>
            <div class="follow-link">Follow</div>
         </div>
       </div>
       
       <div style="margin-top: 30px; font-size: 11px; color: #555; line-height: 1.5;">
         <p>About ‚Ä¢ Help ‚Ä¢ Press ‚Ä¢ API ‚Ä¢ Jobs ‚Ä¢ Privacy ‚Ä¢ Terms</p>
         <p>¬© 2026 VYBE FROM APPLABS</p>
       </div>
    </aside>

  </div>

  <script>
    const API = "https://linkedin-clone-appdost-m3go.onrender.com"; // reusing backend
    
    // Auth Check
    const user = JSON.parse(localStorage.getItem("user"));
    if (!user) window.location.href = "index.html";

    // Setup UI with User Data
    document.getElementById("currentUserAvatar").src = "https://cdn-icons-png.flaticon.com/512/3135/3135715.png";
    document.getElementById("currentUserName").innerText = user.name;
    document.getElementById("sidebarAvatar").src = "https://cdn-icons-png.flaticon.com/512/3135/3135715.png";
    document.getElementById("sidebarName").innerText = user.name.toLowerCase().replace(/\s/g, '_');
    document.getElementById("sidebarEmail").innerText = user.name;

    // üì∏ Render Stories (Mock)
    const storyUsers = [
      { name: "Your Story", img: "https://cdn-icons-png.flaticon.com/512/3135/3135715.png", self: true },
      { name: "elon_musk", img: "https://i.pravatar.cc/150?img=68" },
      { name: "bill_gates", img: "https://i.pravatar.cc/150?img=11" },
      { name: "tech_guru", img: "https://i.pravatar.cc/150?img=53" },
      { name: "design_daily", img: "https://i.pravatar.cc/150?img=47" },
      { name: "code_life", img: "https://i.pravatar.cc/150?img=3" },
      { name: "startup_hub", img: "https://i.pravatar.cc/150?img=17" },
    ];

    const storiesContainer = document.getElementById("stories");
    storyUsers.forEach(u => {
       const html = `
         <div class="story-item">
           <div class="story-ring">
             <img src="${u.img}" class="story-img" />
           </div>
           <span class="story-name">${u.name}</span>
         </div>
       `;
       storiesContainer.insertAdjacentHTML("beforeend", html);
    });

    // Toggle Create Post
    function toggleCreatePost() {
      const box = document.getElementById("createPostBox");
      if (box.style.display === "block") {
         box.style.display = "none";
      } else {
         box.style.display = "block";
         document.getElementById("postText").focus();
      }
    }

    // Image/Video Previews
    let imageData = "", videoData = "";
    const previewArea = document.getElementById("previewArea");
    
    document.getElementById("imageUpload").addEventListener("change", (e) => {
       const file = e.target.files[0];
       if(!file) return;
       const reader = new FileReader();
       reader.onload = (ev) => {
          imageData = ev.target.result;
          previewArea.innerHTML = `<img src="${imageData}" style="max-width: 100%; border-radius: 8px;" />`;
       };
       reader.readAsDataURL(file);
    });

    document.getElementById("videoUpload").addEventListener("change", (e) => {
       const file = e.target.files[0];
       if(!file) return;
       const reader = new FileReader();
       reader.onload = (ev) => {
          videoData = ev.target.result;
          previewArea.innerHTML = `<video src="${videoData}" controls style="max-width: 100%; border-radius: 8px;"></video>`;
       };
       reader.readAsDataURL(file);
    });


    // Feed Logic (Reusing existing LocalStorage logic for speed)
    let posts = JSON.parse(localStorage.getItem("posts")) || [];
    const feed = document.getElementById("feed");

    function renderPosts() {
      feed.innerHTML = "";
      posts.forEach((p, i) => {
         // Determine visuals
         let mediaHTML = "";
         if (p.image) mediaHTML = `<div class="post-media"><img src="${p.image}" /></div>`;
         else if (p.video) mediaHTML = `<div class="post-media"><video src="${p.video}" controls></video></div>`;
         
         const html = `
           <div class="post-card" data-index="${i}">
             <div class="post-header">
                <div class="user-info">
                   <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="avatar-small" />
                   <span class="username">${p.name.toLowerCase().replace(/\s/g, '_')}</span>
                   <span class="time">‚Ä¢ ${timeSince(new Date(p.timestamp))}</span>
                </div>
                <div style="cursor: pointer;">‚Ä¢‚Ä¢‚Ä¢</div>
             </div>

             ${mediaHTML}

             <div class="action-bar">
                <div class="action-left">
                   <button class="icon-btn" onclick="likePost(this)">
                      <svg fill="${p.likes > 0 ? '#ef4444' : 'none'}" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>
                   </button>
                   <button class="icon-btn">
                      <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
                   </button>
                   <button class="icon-btn">
                      <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg>
                   </button>
                </div>
                <button class="icon-btn">
                   <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/></svg>
                </button>
             </div>

             <span class="likes-count">${p.likes} likes</span>
             
             <div class="caption">
               <strong>${p.name.toLowerCase().replace(/\s/g, '_')}</strong> ${p.text}
             </div>

             <div class="view-comments">View all ${p.comments.length} comments</div>
           </div>
         `;
         feed.insertAdjacentHTML("beforeend", html);
      });
    }

    function createPost() {
       const text = document.getElementById("postText").value;
       if(!text && !imageData && !videoData) return;
       
       const newPost = {
         name: user.name,
         email: user.email,
         text,
         image: imageData,
         video: videoData,
         likes: 0,
         comments: [],
         timestamp: new Date()
       };
       posts.unshift(newPost);
       localStorage.setItem("posts", JSON.stringify(posts));
       renderPosts();
       
       // Reset UI
       document.getElementById("postText").value = "";
       previewArea.innerHTML = "";
       imageData = ""; videoData = "";
       toggleCreatePost();
    }

    function likePost(btn) {
       const index = btn.closest(".post-card").dataset.index;
       posts[index].likes++;
       localStorage.setItem("posts", JSON.stringify(posts));
       renderPosts();
    }
    
    function logoutUser() {
       localStorage.removeItem("user");
       window.location.href = "index.html";
    }

    function timeSince(date) {
      const seconds = Math.floor((new Date() - date) / 1000);
      let interval = seconds / 31536000;
      if (interval > 1) return Math.floor(interval) + " years ago";
      interval = seconds / 2592000;
      if (interval > 1) return Math.floor(interval) + " months ago";
      interval = seconds / 86400;
      if (interval > 1) return Math.floor(interval) + " days ago";
      interval = seconds / 3600;
      if (interval > 1) return Math.floor(interval) + " hours ago";
      interval = seconds / 60;
      if (interval > 1) return Math.floor(interval) + " minutes ago";
      return Math.floor(seconds) + " seconds ago";
    }

    // Init
    renderPosts();

  </script>
</body>
</html>
